var o={},R;function N(){if(R)return o;R=1,Object.defineProperty(o,"__esModule",{value:!0});var F=1/60*1e3,S=typeof performance<"u"?function(){return performance.now()}:function(){return Date.now()},x=typeof window<"u"?function(e){return window.requestAnimationFrame(e)}:function(e){return setTimeout(function(){return e(S())},F)};function _(e){var r=[],u=[],c=0,a=!1,f=new WeakSet,y={schedule:function(t,n,s){n===void 0&&(n=!1),s===void 0&&(s=!1);var d=s&&a,w=d?r:u;return n&&f.add(t),w.indexOf(t)===-1&&(w.push(t),d&&a&&(c=r.length)),t},cancel:function(t){var n=u.indexOf(t);n!==-1&&u.splice(n,1),f.delete(t)},process:function(t){var n;if(a=!0,n=[u,r],r=n[0],u=n[1],u.length=0,c=r.length,c)for(var s=0;s<c;s++){var d=r[s];d(t),f.has(d)&&(y.schedule(d),e())}a=!1}};return y}var T=40,m=!0,v=!1,h=!1,i={delta:0,timestamp:0},p=["read","update","preRender","render","postRender"],l=p.reduce(function(e,r){return e[r]=_(function(){return v=!0}),e},{}),j=p.reduce(function(e,r){var u=l[r];return e[r]=function(c,a,f){return a===void 0&&(a=!1),f===void 0&&(f=!1),v||E(),u.schedule(c,a,f)},e},{}),D=p.reduce(function(e,r){return e[r]=l[r].cancel,e},{}),O=p.reduce(function(e,r){return e[r]=function(){return l[r].process(i)},e},{}),q=function(e){return l[e].process(i)},g=function(e){v=!1,i.delta=m?F:Math.max(Math.min(e-i.timestamp,T),1),i.timestamp=e,h=!0,p.forEach(q),h=!1,v&&(m=!1,x(g))},E=function(){v=!0,m=!0,h||x(g)},M=function(){return i};return o.cancelSync=D,o.default=j,o.flushSync=O,o.getFrameData=M,o}export{N as r};
