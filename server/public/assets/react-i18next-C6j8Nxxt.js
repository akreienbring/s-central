import{r as l}from"./react-BAvqZb1q.js";import"./i18next-C9BCMqqX.js";import{s as W}from"./use-sync-external-store-CbMSHlrz.js";const q=(e,t,s,u)=>{const i=[s,{code:t,...u||{}}];if(e?.services?.logger?.forward)return e.services.logger.forward(i,"warn","react-i18next::",!0);g(i[0])&&(i[0]=`react-i18next:: ${i[0]}`),e?.services?.logger?.warn?e.services.logger.warn(...i):console?.warn&&console.warn(...i)},T={},j=(e,t,s,u)=>{g(s)&&T[s]||(g(s)&&(T[s]=new Date),q(e,t,s,u))},k=(e,t)=>()=>{if(e.isInitialized)t();else{const s=()=>{setTimeout(()=>{e.off("initialized",s)},0),t()};e.on("initialized",s)}},C=(e,t,s)=>{e.loadNamespaces(t,k(e,s))},P=(e,t,s,u)=>{if(g(s)&&(s=[s]),e.options.preload&&e.options.preload.indexOf(t)>-1)return C(e,s,u);s.forEach(i=>{e.options.ns.indexOf(i)<0&&e.options.ns.push(i)}),e.loadLanguages(t,k(e,u))},B=(e,t,s={})=>!t.languages||!t.languages.length?(j(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0):t.hasLoadedNamespace(e,{lng:s.lng,precheck:(u,i)=>{if(s.bindI18n&&s.bindI18n.indexOf("languageChanging")>-1&&u.services.backendConnector.backend&&u.isLanguageChangingTo&&!i(u.isLanguageChangingTo,e))return!1}}),g=e=>typeof e=="string",G=e=>typeof e=="object"&&e!==null,K=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,X={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},Y=e=>X[e],$=e=>e.replace(K,Y);let I={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:$};const D=(e={})=>{I={...I,...e}},J=()=>I;let F;const Q=e=>{F=e},Z=()=>F,ce={type:"3rdParty",init(e){D(e.options.react),Q(e)}},V=l.createContext();class ee{constructor(){this.usedNamespaces={}}addUsedNamespaces(t){t.forEach(s=>{this.usedNamespaces[s]||(this.usedNamespaces[s]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const te=(e,t)=>g(t)?t:G(t)&&g(t.defaultValue)?t.defaultValue:Array.isArray(e)?e[e.length-1]:e,ne={t:te,ready:!1},se=()=>()=>{},ie=(e,t={})=>{const{i18n:s}=t,{i18n:u,defaultNS:i}=l.useContext(V)||{},n=s||u||Z();n&&!n.reportNamespaces&&(n.reportNamespaces=new ee),n||j(n,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const f=l.useMemo(()=>({...J(),...n?.options?.react,...t}),[n,t]),{useSuspense:N,keyPrefix:h}=f,x=i||n?.options?.defaultNS,O=g(x)?[x]:x||["translation"],d=l.useMemo(()=>O,O);n?.reportNamespaces?.addUsedNamespaces?.(d);const E=l.useRef(0),z=l.useCallback(r=>{if(!n)return se;const{bindI18n:a,bindI18nStore:o}=f,c=()=>{E.current+=1,r()};return a&&n.on(a,c),o&&n.store.on(o,c),()=>{a&&a.split(" ").forEach(b=>n.off(b,c)),o&&o.split(" ").forEach(b=>n.store.off(b,c))}},[n,f]),R=l.useRef(),_=l.useCallback(()=>{if(!n)return ne;const r=!!(n.isInitialized||n.initializedStoreOnce)&&d.every(U=>B(U,n,f)),a=t.lng||n.language,o=E.current,c=R.current;if(c&&c.ready===r&&c.lng===a&&c.keyPrefix===h&&c.revision===o)return c;const v={t:n.getFixedT(a,f.nsMode==="fallback"?d:d[0],h),ready:r,lng:a,keyPrefix:h,revision:o};return R.current=v,v},[n,d,h,f,t.lng]),[A,H]=l.useState(0),{t:w,ready:p}=W.useSyncExternalStore(z,_,_);l.useEffect(()=>{if(n&&!p&&!N){const r=()=>H(a=>a+1);t.lng?P(n,t.lng,d,r):C(n,d,r)}},[n,t.lng,d,p,N,A]);const m=n||{},y=l.useRef(null),S=l.useRef(),L=r=>{const a=Object.getOwnPropertyDescriptors(r);a.__original&&delete a.__original;const o=Object.create(Object.getPrototypeOf(r),a);if(!Object.prototype.hasOwnProperty.call(o,"__original"))try{Object.defineProperty(o,"__original",{value:r,writable:!1,enumerable:!1,configurable:!1})}catch{}return o},M=l.useMemo(()=>{const r=m,a=r?.language;let o=r;r&&(y.current&&y.current.__original===r?S.current!==a?(o=L(r),y.current=o,S.current=a):o=y.current:(o=L(r),y.current=o,S.current=a));const c=[w,o,p];return c.t=w,c.i18n=o,c.ready=p,c},[w,m,p,m.resolvedLanguage,m.language,m.languages]);if(n&&N&&!p)throw new Promise(r=>{const a=()=>r();t.lng?P(n,t.lng,d,a):C(n,d,a)});return M};export{ce as i,ie as u};
